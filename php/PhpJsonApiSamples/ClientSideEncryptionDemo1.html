<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->

<html>
    <head>
        <meta charset="UTF-8">
        <title>Client side Encryption</title>
        
        <!-- This page shows Demo for using PayTrace client side Encryption library - after the client side validation are met.-->
        
        <!-- This is the PayTrace End-to-End Encryption library: -->
        <script language="javascript" src="https://rmapi.paytrace.com/assets/e2ee/paytrace-e2ee.js"></script>
        <!-- Note: PayTrace uses jquery 1.11.1 so please use the same version if possible.Using different versions of jquery can cause some issues.
          in case of using different version of jQuery - refer this https://api.jquery.com/jquery.noconflict/-->
        <!-- for the demo purpose, using CDN path-->
        <script src="https://code.jquery.com/jquery-1.11.1.js"> </script>
         
        <script language="javascript">
          
                // set the key from an AJAX call  
                $(document).ready(function(){
                        paytrace.setKeyAjax('DemoPublic_Key.pem') ;// set the key from an AJAX call (in this case via a relative URL)
                });
                
                $(document).ready( function(){
                    $("#DemoForm").submit(function(e){
                        //To prevent the default action of the submit
                        e.preventDefault();
                         
                        // Do your validation and if all validations are met, 
                        // Next is to submit the form with paytrace.submitEncrypted.
                        if ($("#ccNumber").val() && $("#ccCSC").val()) {
                           //if all validations are met, submit the form to Paytrace library for encyption.
                            paytrace.submitEncrypted("#DemoForm");
                        }
                        else{ 
                            alert("CCNumber and CSC number are required ! "); 
                        }
                    });
                });  
            
              /*//you can use following code - different version of basic input validation
              // set the key from an AJAX call  
              $(document).ready(function(){
                  paytrace.setKeyAjax('DemoPublic_Key.pem'); //<your.pem file> (may be using relative url)
               });
               
              // 
              $(document).ready( function(){
                  $("#DemoForm").submit(function(e){
                    // To prevent the Default action of the submit 
                    e.preventDefault();
                    
                    // Do your validation and if all validations are met, 
                    // Next is to submit the form with paytrace.submitEncrypted.
                    var ccNumber = document.getElementById("ccNumber").value;
                    var cscNumber = document.getElementById("ccCSC").value ;
                    
                    if(ccNumber.length == 0 ){
                         alert("Please enter the CCnumber.");     
                    }else if(cscNumber.length == 0){
                          alert("Please enter the CSCnumber.");
                    }else{
                    //if all validation are met, submit the form to Paytrace library for encyption.
                    paytrace.submitEncrypted("#DemoForm"); }
                });    
               });*/
       
                
             </script>
         
    </head>
    <body>
        <form id="DemoForm"  method="post" action="ClientSideEncryption.php" > 
            <div>
                <!-- On each field to be encrypted at the browser, add the "form-control pt-encrypt" class. -->
                <p>Enter Credit Card Number : <input id="ccNumber" type="text" class="form-control pt-encrypt"   name="ccNumber" placeholder="Credit card number"/> 
                </p>
                <p>Enter Card Security code : <input id="ccCSC" type="text"  class="form-control pt-encrypt"  name="ccCSC"  placeholder="Card security code" /> 
                </p>	
                <input type="submit" value="Submit"/>
          
            </div>
        </form>
        
        <br>
            <a href="Default.php">Back to Home </a> 
        <br>
   
    </body>
</html>
